				ORG 0000H
				MOV TMOD, #20H
				MOV TH1, #-3
				MOV SCON, #50H
				MOV PCON, #80H
				SETB TR1
				ACALL INIT_LCD
		LOOP:	MOV A, #31H
				ACALL LCDDATA
				ACALL NHAN		
				MOV DPTR, #6000H
				ACALL CLEAR
				MOVX @DPTR, A
				ACALL LCDDATA			  	
				SJMP LOOP
		XUAT:	MOV SBUF, A
				JNB TI, $
				CLR TI
				RET
NHAN:	JNB RI, $
		CLR RI
		MOV A, SBUF
		RET

;------------------WAIT FOR LCD-----------------
WAIT_LCD: MOV R4, #10
LOOPDL1:  MOV R3, #250
		DJNZ R3, $
		DJNZ R4, LOOPDL1
		RET
;----------------END FUNCTION------------------
;----------------WRITE DATA TO LCD-------------
LCDDATA:MOV DPTR, #6000H 
		MOVX @DPTR, A
		SETB P3.5
		SETB P3.4
		CALL WAIT_LCD
		CLR P3.4
		RET
;---------------END FUNCTION ------------------
		LCDCOM:	MOV DPTR, #6000H
		MOVX @DPTR, A
		CLR P3.5
		SETB P3.4
		CALL WAIT_LCD
		CLR P3.4
		RET
;---------------END FUNCTION-------------------
INIT_LCD: MOV A, #0CH
		CALL LCDCOM
		MOV A, #06H
		CALL LCDCOM
		MOV A, #38H
		CALL LCDCOM
		RET
CLEAR:	MOV A, #01H
		CALL LCDCOM
		RET
				END